(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{27:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(6),o=n.n(r),i=(n(27),n(28),n(12)),s=n(3),u=n(8),l=n(0),j=function(e){var t=e.src,n=e.alt,c=e.bigSrc,a=e.onClick;return Object(l.jsx)("li",{className:"ImageGalleryItem",children:Object(l.jsx)("img",{src:t,alt:n,className:"ImageGalleryItem-image",onClick:function(){return a(c)}})})},b=function(e){var t=e.hits,n=e.onClick;return Object(l.jsx)("ul",{className:"ImageGallery",id:"gallery",children:t.map((function(e){return Object(l.jsx)(j,{src:e.webformatURL,bigSrc:e.largeImageURL,id:e.id,alt:e.tags,onClick:n},e.id)}))})},h=document.querySelector("#modal-root"),m=function(e){var t=e.onClose,n=e.largeImageURL;Object(c.useEffect)((function(){return window.addEventListener("keydown",a),function(){window.removeEventListener("keydown",a)}}));var a=function(e){"Escape"===e.code&&t()};return Object(r.createPortal)(Object(l.jsx)("div",{className:"Overlay",onClick:function(e){if(e.currentTarget!==e.target)return!1;t()},children:Object(l.jsx)("div",{className:"Modal",children:Object(l.jsx)("img",{src:n,alt:"img"})})}),h)},f={query:"",page:1},g=function(e){var t=e.onSubmit,n=Object(c.useState)(f),a=Object(u.a)(n,2),r=a[0],o=a[1],i=function(){o(f)};return Object(l.jsx)("header",{className:"Searchbar",children:Object(l.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(r.query),i()},children:[Object(l.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(l.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(l.jsx)("input",{className:"SearchForm-input",type:"text",value:r.query,onChange:function(e){o((function(t){return Object(s.a)(Object(s.a)({},t),{},{query:e.target.value})}))},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},d=function(e){var t=e.fetchHits;return Object(l.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})},O=n(21),p=n.n(O),y=function(){return Object(l.jsx)(p.a,{type:"Hearts",color:"#00BFFF",height:60,width:60,timeout:3e3,className:"loader"})},v=n(10),x=n.n(v),w=n(22),S=n(11),k=n.n(S);k.a.defaults.baseURL="https://pixabay.com/api";var L=function(){var e=Object(w.a)(x.a.mark((function e(t){var n,c,a,r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.searchQuery,c=void 0===n?"":n,a=t.currentPage,r=void 0===a?1:a,e.prev=1,o="/?q=".concat(c,"&page=").concat(r,"&key=").concat("22768784-54984d8802417c1fa5d19a8a9","&image_type=photo&orientation=horizontal&per_page=12"),e.next=5,k.a.get(o).then((function(e){return e.data.hits}));case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),N={hits:[],currentPage:1,searchQuery:"",largeImageURL:"",isLoading:!1},I=function(){var e=Object(c.useState)(N),t=Object(u.a)(e,2),n=t[0],a=t[1],r=function(){var e=n.currentPage,t={searchQuery:n.searchQuery,currentPage:e};a((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0})})),L(t).then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{hits:[].concat(Object(i.a)(t.hits),Object(i.a)(e)),currentPage:t.currentPage+1})}))})).catch((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e})}))})).finally((function(){a((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))};Object(c.useEffect)((function(){n.searchQuery&&r(n.searchQuery)}),[n.searchQuery]);var o=function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{largeImageURL:e})}))},j=n.hits,h=n.isLoading,f=n.largeImageURL;return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(g,{onSubmit:function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{searchQuery:e,currentPage:1,hits:[]})}))}}),f&&Object(l.jsx)(m,{onClose:o,largeImageURL:f}),Object(l.jsx)(b,{hits:n.hits,onClick:o}),j.length>0&&!h&&Object(l.jsx)(d,{fetchHits:r}),h&&Object(l.jsx)(y,{})]})};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(I,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.844d34bb.chunk.js.map